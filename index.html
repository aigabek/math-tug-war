<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tug of War Math - v6</title>
<style>
  body { font-family: Arial, sans-serif; margin:0; padding:0; background:#111; color:white; overflow:hidden; }
  #top-bar { background:#333; padding:10px; display:flex; justify-content:space-between; align-items:center; }
  #game-timer { font-size:2.5em; font-weight:bold; color:#0f0; }
  #question { font-size:2.8em; text-align:center; margin:15px 0; min-height:70px; }
  
  .arena { display:flex; height:42vh; align-items:center; padding:0 20px; position:relative; }
  .team { flex:1; display:flex; flex-direction:column; align-items:center; }
  .blue { align-items:flex-end; }
  .red { align-items:flex-start; }
  
  .characters { font-size:4.8em; margin-bottom:25px; display:flex; gap:20px; transition:transform 0.4s; }
  .blue .characters { transform-origin: right center; }
  .red .characters { transform-origin: left center; }
  .pulling { animation: pullAnim 0.5s ease-out; }
  @keyframes pullAnim { 0% { transform: scale(1.1) translateX(-8px); } 100% { transform: scale(1) translateX(0); } }
  .wrong-shake { animation: shake 0.4s; }
  @keyframes shake { 0%,100%{transform:translateX(0);} 25%{transform:translateX(-12px);} 75%{transform:translateX(12px);} }
  
  .rope-container { width:280px; position:relative; height:90px; display:flex; align-items:center; justify-content:center; }
  .rope { width:100%; height:32px; background:linear-gradient(#654321, #8B4513, #654321); border-radius:16px; position:relative; box-shadow:0 8px 15px rgba(0,0,0,0.7); }
  .marker { 
    position:absolute; 
    width:52px; height:62px; 
    background:#FFD700; 
    border:5px solid #B8860B; 
    border-radius:50%; 
    top:-26px; 
    left:50%; /* base position */
    transform: translateX(-50%); /* ‚Üê Perfect center fix */
    transition:left 0.8s cubic-bezier(0.25,0.8,0.4,1); 
    display:flex; align-items:center; justify-content:center; 
    font-size:1.8em; 
    box-shadow:0 10px 18px rgba(0,0,0,0.7); 
  }
  
  .center-line { position:absolute; left:50%; top:0; bottom:0; width:6px; background:repeating-linear-gradient(to bottom, #fff, #fff 20px, transparent 20px, transparent 40px); z-index:2; transform:translateX(-50%); }
  
  .input-area { width:100%; max-width:340px; }
  .input-display { font-size:3.2em; background:#000; padding:12px; text-align:center; border:4px solid #555; margin:15px 0; min-height:70px; border-radius:12px; }
  .keypad { display:grid; grid-template-columns:repeat(3,1fr); gap:12px; }
  .keypad button { font-size:2.1em; padding:18px; background:#444; color:white; border:none; border-radius:12px; }
  .keypad button:active { background:#666; }
  .keypad .clear { background:#666; }
  .keypad .submit { background:#006400; font-weight:bold; }
  
  .settings { 
    background:#222; 
    padding:20px; 
    text-align:center; 
    margin-top: 70px; 
  }
  .settings select, .settings button { font-size:1.4em; padding:12px; margin:8px; border-radius:8px; }
  
  #winner { position:absolute; inset:0; background:rgba(0,0,0,0.95); display:none; flex-direction:column; align-items:center; justify-content:center; font-size:4.5em; z-index:100; }
</style>
</head>
<body>
<!-- HTML body remains the same as v5 -->
<div id="top-bar">
  <div>Question Interval: <span id="interval-display">3s</span></div>
  <div id="game-timer">05:00</div>
  <div>Time Left</div>
</div>

<div id="question">Loading question...</div>

<div class="arena">
  <div class="team blue">
    <div class="characters" id="blue-chars">üßç‚Äç‚ôÇÔ∏èüßç‚Äç‚ôÄÔ∏èüßç‚Äç‚ôÇÔ∏èüßç‚Äç‚ôÄÔ∏è</div>
    <div class="input-area">
      <div id="blue-input" class="input-display">0</div>
      <div class="keypad" id="blue-keypad">
        <button onclick="addDigit('blue',1)">1</button><button onclick="addDigit('blue',2)">2</button><button onclick="addDigit('blue',3)">3</button>
        <button onclick="addDigit('blue',4)">4</button><button onclick="addDigit('blue',5)">5</button><button onclick="addDigit('blue',6)">6</button>
        <button onclick="addDigit('blue',7)">7</button><button onclick="addDigit('blue',8)">8</button><button onclick="addDigit('blue',9)">9</button>
        <button class="clear" onclick="clearInput('blue')">C</button>
        <button onclick="addDigit('blue',0)">0</button>
        <button class="submit" onclick="submitAnswer('blue')">Submit</button>
      </div>
    </div>
  </div>

  <div class="rope-container">
    <div class="rope"><div class="marker" id="marker">‚öì</div></div>
    <div class="center-line"></div>
  </div>

  <div class="team red">
    <div class="characters" id="red-chars">üßç‚Äç‚ôÇÔ∏èüßç‚Äç‚ôÄÔ∏èüßç‚Äç‚ôÇÔ∏èüßç‚Äç‚ôÄÔ∏è</div>
    <div class="input-area">
      <div id="red-input" class="input-display">0</div>
      <div class="keypad" id="red-keypad">
        <button onclick="addDigit('red',1)">1</button><button onclick="addDigit('red',2)">2</button><button onclick="addDigit('red',3)">3</button>
        <button onclick="addDigit('red',4)">4</button><button onclick="addDigit('red',5)">5</button><button onclick="addDigit('red',6)">6</button>
        <button onclick="addDigit('red',7)">7</button><button onclick="addDigit('red',8)">8</button><button onclick="addDigit('red',9)">9</button>
        <button class="clear" onclick="clearInput('red')">C</button>
        <button onclick="addDigit('red',0)">0</button>
        <button class="submit" onclick="submitAnswer('red')">Submit</button>
      </div>
    </div>
  </div>
</div>

<div class="settings">
  <select id="game-duration">
    <option value="120">2 minutes</option>
    <option value="300" selected>5 minutes</option>
    <option value="600">10 minutes</option>
  </select>
  <select id="question-interval">
    <option value="3000" selected>3 seconds</option>
    <option value="4000">4 seconds</option>
    <option value="5000">5 seconds</option>
    <option value="6000">6 seconds</option>
  </select>
  <button onclick="startGame()">‚ñ∂ Start Game</button>
  <button onclick="resetGame()">Reset</button>
</div>

<div id="winner">
  <div id="winner-text"></div>
  <button onclick="resetGame()" style="font-size:1.2em; padding:20px 40px; margin-top:40px;">Play Again</button>
</div>

<script>
/* ... (all functions same as v5 except resetGame) ... */

function resetGame() {
  if (gameTimerInterval) clearInterval(gameTimerInterval);
  if (questionTimerInterval) clearInterval(questionTimerInterval);
  
  currentPosition = 50;
  
  // Instant snap to center (no transition)
  marker.style.transition = 'none';
  marker.style.left = '50%';
  void marker.offsetWidth; // force reflow
  marker.style.transition = 'left 0.8s cubic-bezier(0.25,0.8,0.4,1)';
  
  document.getElementById('winner').style.display = 'none';
  document.getElementById('question').textContent = 'Press Start Game';
  resetInputs();
  blueSubmitted = redSubmitted = false;
}

/* rest of the script remains exactly the same as v5 */

window.onload = init;
</script>
</body>
</html>